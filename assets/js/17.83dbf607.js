(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{341:function(t,a,s){"use strict";s.r(a);var n=s(33),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"rn0-6x-react-navigation4x等升级适配说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rn0-6x-react-navigation4x等升级适配说明"}},[t._v("#")]),t._v(" RN0.6x_react_navigation4x等升级适配说明")]),t._v(" "),s("p",[t._v("号外号外，RN0.6x已经发布有一段时间了，react-navigation也在前不久进入了4x的时代。为了让大家少踩坑，现已将课程升级适配到RN0.6x以及react-navigation4x，另外，包括友盟分享和统计在内的所有插件也已升级是配到最新版。")]),t._v(" "),s("p",[t._v("为了帮助到大家顺利的学习使用新版本RN与react-navigation等相关库，我将整个的升级适配过程总结出以下文档供小伙伴们学习参考：")]),t._v(" "),s("ol",[s("li",[t._v("react-native 0.6x升级适配说明")]),t._v(" "),s("li",[t._v("react-navigation 4x升级适配说明")]),t._v(" "),s("li",[t._v("友盟分享和统计最新版升级适配说明")]),t._v(" "),s("li",[t._v("其他升级适配说明")]),t._v(" "),s("li",[t._v("FAQ")])]),t._v(" "),s("h2",{attrs:{id:"_1-react-native-0-6x升级适配说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-react-native-0-6x升级适配说明"}},[t._v("#")]),t._v(" 1.react-native 0.6x升级适配说明")]),t._v(" "),s("p",[t._v("本次为了将项目从0.59.9升级适配到0.6x，由于变更跨度比较大，顾采用了“创建一个新的RN项目，然后将代码移植到这个RN项目”的方式进行升级适配的，变更了那些代码，可查看提交记录："),s("a",{attrs:{href:"https://git.imooc.com/coding-304/GitHub_Advanced/commit/c0d8d0b571bfbc93a3abb2506489f5a822c36838",target:"_blank",rel:"noopener noreferrer"}},[t._v("c0d8d0b5"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_1-1-0-6x版本重大特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-0-6x版本重大特性"}},[t._v("#")]),t._v(" 1.1 0.6x版本重大特性")]),t._v(" "),s("ul",[s("li",[t._v("0.61.0\n"),s("ul",[s("li",[t._v("react版本采用16.9")]),t._v(" "),s("li",[t._v("采用了"),s("code",[t._v("use_frameworks!")]),t._v("来更好的支持CocoaPods")]),t._v(" "),s("li",[t._v('默认打开"Fast refresh"，可以通过devtool关闭')]),t._v(" "),s("li",[t._v("其他"),s("a",{attrs:{href:"https://github.com/react-native-community/releases/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("changelog"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[t._v("0.60：0.60标志着RN进入了又一个新的里程碑，本次更新焦距在提效与与时俱进，比如：自动link、默认支持CocoaPods等\n"),s("ul",[s("li",[t._v("支持了Android X，如果你用的RN是0.6x那么对应的三方插件请用适配了Android X的版本（可去插件的官库上看change log）")]),t._v(" "),s("li",[t._v("移除了WebView和Geolocation，用到这些组件时需要单独引入对应的独立插件\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/react-native-community/react-native-webview",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-native-webview"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/react-native-community/react-native-geolocation",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-native-geolocation"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[t._v("iOS项目默认支持CocoaPods，所以打开ios目录下的项目时记得选择xxx.xcworkspace文件")]),t._v(" "),s("li",[t._v("支持自动link，之前npm安装完还需要手动link的插件现在RN脚手架能够自动帮你link，释放了双手")]),t._v(" "),s("li",[t._v("其他"),s("a",{attrs:{href:"https://github.com/react-native-community/releases/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("changelog"),s("OutboundLink")],1)])])])]),t._v(" "),s("h3",{attrs:{id:"_1-2-新版本带来的小技巧"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-新版本带来的小技巧"}},[t._v("#")]),t._v(" 1.2 新版本带来的小技巧")]),t._v(" "),s("h4",{attrs:{id:"更简洁的运行指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更简洁的运行指令"}},[t._v("#")]),t._v(" 更简洁的运行指令")]),t._v(" "),s("p",[t._v("新版本RN脚本中引入了"),s("code",[t._v("android")]),t._v("和"),s("code",[t._v("ios")]),t._v("简化命令：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"android"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native run-android"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native run-ios"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ...\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[t._v("现在通过"),s("code",[t._v("npm run android")]),t._v("、"),s("code",[t._v("npm run ios")]),t._v("就可以运行项目了。")]),t._v(" "),s("h4",{attrs:{id:"升级助手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#升级助手"}},[t._v("#")]),t._v(" 升级助手")]),t._v(" "),s("p",[t._v("RN社区提供了一个查看不同版本间升级变更的小助手：叫 "),s("a",{attrs:{href:"https://react-native-community.github.io/upgrade-helper/",target:"_blank",rel:"noopener noreferrer"}},[t._v("upgrade helper webtool"),s("OutboundLink")],1),t._v("，通过它你能快速查看你当前的RN版到你要升级到的RN版本间的所有变更和需要注意的点，比如：从0.59.9到0.61.0-rc.0的变更内容："),s("a",{attrs:{href:"https://react-native-community.github.io/upgrade-helper/?from=0.59.9&to=0.61.0-rc.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("0.59.9 -> 0.61.0-rc.0"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"_2-react-navigation-4x安装及升级适配说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-react-navigation-4x安装及升级适配说明"}},[t._v("#")]),t._v(" 2. react-navigation 4x安装及升级适配说明")]),t._v(" "),s("p",[t._v("react-navigation从发布以来经历了1x，2x，3x的重要变更，现在已经到了4x的阶段，4x相比3x最为重大的变更点如下：")]),t._v(" "),s("blockquote",[s("p",[t._v("建议，结合"),s("a",{attrs:{href:"https://reactnavigation.org/docs/en/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-navigation官方安装文档"),s("OutboundLink")],1),t._v("在借助下面教程进行学习。")])]),t._v(" "),s("h3",{attrs:{id:"_2-1-4x版本重大特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4x版本重大特性"}},[t._v("#")]),t._v(" 2.1 4x版本重大特性")]),t._v(" "),s("ul",[s("li",[t._v("navigationOptions的"),s("code",[t._v("header: null")]),t._v("API被废弃，改为"),s("code",[t._v("headerShown: false")]),t._v("替代")]),t._v(" "),s("li",[t._v("navigator被拆分到不同的库中：\n"),s("ul",[s("li",[t._v("createStackNavigator -> "),s("a",{attrs:{href:"https://github.com/react-navigation/stack",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-navigation-stack"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("createDrawerNavigator -> "),s("a",{attrs:{href:"https://github.com/react-navigation/drawer",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-navigation-drawer"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("createBottomTabNavigator, createMaterialTopTabNavigator -> "),s("a",{attrs:{href:"https://github.com/react-navigation/tabs",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-navigation-tabs"),s("OutboundLink")],1)])])])]),t._v(" "),s("p",[t._v("所以，用到这些类型导航器的地方其引入方式也需要做相应的调整：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createAppContainer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createStackNavigator "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-navigation'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createAppContainer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-navigation'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStackNavigator "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-navigation-stack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-2-4x版本安装使用的正确方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4x版本安装使用的正确方式"}},[t._v("#")]),t._v(" 2.2 4x版本安装使用的正确方式")]),t._v(" "),s("p",[s("strong",[t._v("4x版本对于的RN版本是0.6x，使用时需要注意")]),t._v("，另外，4x版本的安装方式如下：")]),t._v(" "),s("h4",{attrs:{id:"第一步：-安装主库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步：-安装主库"}},[t._v("#")]),t._v(" 第一步： 安装主库")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-navigation\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with npm")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-navigation")]),t._v("\n")])])]),s("h4",{attrs:{id:"第二步：-安装主库依赖的三方库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步：-安装主库依赖的三方库"}},[t._v("#")]),t._v(" 第二步： 安装主库依赖的三方库")]),t._v(" "),s("p",[t._v("因为新版react-navigation依赖一些第三方库，所以安装时需要同时引入：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-gesture-handler\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-reanimated\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-safe-area-context\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @react-native-community/masked-view\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-native-screens\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with npm")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-native-gesture-handler")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-native-reanimated")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-native-safe-area-context")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install @react-native-community/masked-view")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-native-screens")]),t._v("\n")])])]),s("h4",{attrs:{id:"第三步：-根据需要引入各导航组件的库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步：-根据需要引入各导航组件的库"}},[t._v("#")]),t._v(" 第三步： 根据需要引入各导航组件的库")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-navigation-stack\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-navigation-drawer\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" react-navigation-tabs\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or with npm")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-navigation-stack")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-navigation-drawer")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm install react-navigation-tabs")]),t._v("\n")])])]),s("h4",{attrs:{id:"第四步：执行pod-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步：执行pod-install"}},[t._v("#")]),t._v(" 第四步：执行pod install")]),t._v(" "),s("p",[t._v("为了在iOS上完成安装，还需要执行一些命令：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ios\npod "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n")])])]),s("h4",{attrs:{id:"第五步：为react-native-screens添加相关依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第五步：为react-native-screens添加相关依赖"}},[t._v("#")]),t._v(" 第五步：为react-native-screens添加相关依赖")]),t._v(" "),s("p",[t._v("为了在Android上完成安装，还需要在"),s("code",[t._v("android/app/build.gradle")]),t._v("中为"),s("code",[t._v("react-native-screens")]),t._v("添加相关依赖：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("implementation "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'androidx.appcompat:appcompat:1.1.0-rc01'")]),t._v("\nimplementation "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0-alpha02'")]),t._v("\n")])])]),s("h4",{attrs:{id:"第六步：配置react-native-gesture-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第六步：配置react-native-gesture-handler"}},[t._v("#")]),t._v(" 第六步：配置react-native-gesture-handler")]),t._v(" "),s("p",[t._v("为了在Android上能够使react-native-gesture-handler有效，需要修改MainActivity.java：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reactnavigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("facebook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("react")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactActivity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("facebook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("react")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactActivityDelegate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("facebook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("react")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactRootView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("swmansion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gesturehandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("react")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RNGestureHandlerEnabledRootView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MainActivity")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactActivity")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMainComponentName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Example"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactActivityDelegate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReactActivityDelegate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactActivityDelegate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMainComponentName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactRootView")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRootView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RNGestureHandlerEnabledRootView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MainActivity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"第七步：在index-js-or-app-js中导入react-native-gesture-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第七步：在index-js-or-app-js中导入react-native-gesture-handler"}},[t._v("#")]),t._v(" 第七步：在"),s("code",[t._v("index.js")]),t._v(" or "),s("code",[t._v("App.js")]),t._v("中导入"),s("code",[t._v("react-native-gesture-handler")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-native-gesture-handler'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"已知兼容问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#已知兼容问题"}},[t._v("#")]),t._v(" 已知兼容问题")]),t._v(" "),s("p",[t._v("当你在RN 0.61.0 上使用react-navigation 4.0时你会发现，createMaterialTopTabNavigator在Android上左右滑动无效，这是一个已知的兼容问题。")]),t._v(" "),s("p",[t._v('该问题由"react-native": "0.61.0-rc.0" 的ReactActivityDelegate的改动引起，导致'),s("code",[t._v("protected ReactRootView createRootView()")]),t._v("不回调，所以react-navigation所使用的react-native-gesture-handler也就在Android上无法监测到用户的手势，进而导致滑动切换tab失效。")]),t._v(" "),s("blockquote",[s("p",[t._v("该问题还在等待react-navigation和react-native进行修复，用到该功能的同学请使用0.60.5版本的RN。")])]),t._v(" "),s("h2",{attrs:{id:"_3-友盟分享和统计最新版-升级适配说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-友盟分享和统计最新版-升级适配说明"}},[t._v("#")]),t._v(" 3.友盟分享和统计最新版 升级适配说明")]),t._v(" "),s("p",[t._v("现已将项目中所用到的友盟分享、登录和统计相关的库和代码升级到了最新版，并且做了相应适配。")]),t._v(" "),s("blockquote",[s("p",[t._v("大家在集成适配最新友盟分享、登录和统计时可参考这次提交："),s("a",{attrs:{href:"https://git.imooc.com/coding-304/GitHub_Advanced/commit/6cc6149449e1bcd67adb9d4d8ec9b599a41b92a1",target:"_blank",rel:"noopener noreferrer"}},[t._v("6cc61494"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"重要变更"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重要变更"}},[t._v("#")]),t._v(" 重要变更")]),t._v(" "),s("p",[t._v("统计方法由track 变成了 onEvent使用时需要留意：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//新版本友盟SDK 时间统计方法由 track -> onEvent")]),t._v("\nAnalyticsUtil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SearchButtonClick"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"_4-其他升级适配说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-其他升级适配说明"}},[t._v("#")]),t._v(" 4. 其他升级适配说明")]),t._v(" "),s("h3",{attrs:{id:"asyncstorage-导入方式发生变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asyncstorage-导入方式发生变化"}},[t._v("#")]),t._v(" AsyncStorage 导入方式发生变化")]),t._v(" "),s("p",[t._v("react-native中的AsyncStorage在未来的版本迭代中将会被从react-native中移除，官方推荐使用\n"),s("a",{attrs:{href:"https://github.com/react-native-community/async-storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-native-community/async-storage"),s("OutboundLink")],1),t._v("来代替：")]),t._v(" "),s("blockquote",[s("p",[t._v("安装方式：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @react-native-community/async-storage\n")])])]),s("p",[t._v("然后：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ios/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" pod "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("使用方式：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("AsyncStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-native'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//改成")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AsyncStorage "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@react-native-community/async-storage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("其他API不变。")]),t._v(" "),s("h2",{attrs:{id:"_5-faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-faq"}},[t._v("#")]),t._v(" 5.FAQ")]),t._v(" "),s("h3",{attrs:{id:"cannot-get-property-supportlibversion-on-extra-properties-extension-as-it-does-not-exist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cannot-get-property-supportlibversion-on-extra-properties-extension-as-it-does-not-exist"}},[t._v("#")]),t._v(" Cannot get property 'supportLibVersion' on extra properties extension as it does not exist")]),t._v(" "),s("h4",{attrs:{id:"问题描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),s("p",[t._v("升级到rn 0.61.0后报上述错误")]),t._v(" "),s("h4",{attrs:{id:"解决办法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决办法"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),s("p",[t._v("在android/build.gradle中添加supportLibVersion：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("buildscript "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ext "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        buildToolsVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28.0.3"')]),t._v("\n        minSdkVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\n        compileSdkVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v("\n        targetSdkVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v("\n        supportLibVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"28.0.0"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"unsupported-modules-detected"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unsupported-modules-detected"}},[t._v("#")]),t._v(" Unsupported Modules Detected")]),t._v(" "),s("h4",{attrs:{id:"问题描述-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题描述-2"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Unsupported Modules Detected.\nCompilation is not supported for following modules: react-native-vector-icons\n")])])]),s("h4",{attrs:{id:"解决办法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决办法-2"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),s("p",[t._v("删除android下的./idea 目录然后重新打开项目。")]),t._v(" "),s("h3",{attrs:{id:"android不显示矢量图标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#android不显示矢量图标"}},[t._v("#")]),t._v(" Android不显示矢量图标")]),t._v(" "),s("h4",{attrs:{id:"问题描述-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题描述-3"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),s("blockquote",[s("p",[t._v("版本信息：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.60.5"')]),t._v(",\n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native-vector-icons"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^6.6.0"')]),t._v(",\n")])])]),s("p",[t._v("不报错但是不显示图标。")]),t._v(" "),s("h4",{attrs:{id:"解决办法-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决办法-3"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),s("p",[t._v("在android/app/build.gradle添加：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("apply from: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../../node_modules/react-native-vector-icons/fonts.gradle"')]),t._v("\n")])])]),s("p",[t._v("参考："),s("a",{attrs:{href:"https://github.com/oblador/react-native-vector-icons#option-with-gradle-recommended",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/oblador/react-native-vector-icons#option-with-gradle-recommended"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"update-is-invalid-a-js-bundle-file-named-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update-is-invalid-a-js-bundle-file-named-null"}},[t._v("#")]),t._v(' Update is invalid - A JS bundle file named "null"')]),t._v(" "),s("h4",{attrs:{id:"问题描述-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题描述-4"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.60.5"')]),t._v(",\n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native-code-push"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.7.0"')]),t._v(",\n")])])]),s("p",[t._v("Codepush jsbundle下载完成，跟新时报错，如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" com.microsoft.codepush.react.CodePushInvalidUpdateException: Update is invalid - A JS bundle "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" named "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"null"')]),t._v(" could not be found within the downloaded contents. Please check that you are releasing your CodePush updates using the exact same JS bundle "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" name that was shipped with your app's binary.\n        at com.microsoft.codepush.react.CodePushUpdateManager.downloadPackage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CodePushUpdateManager.java:241"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at com.microsoft.codepush.react.CodePushNativeModule"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$3")]),t._v(".doInBackground"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CodePushNativeModule.java:217"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at com.microsoft.codepush.react.CodePushNativeModule"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$3")]),t._v(".doInBackground"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CodePushNativeModule.java:211"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at android.os.AsyncTask"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(".call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AsyncTask.java:333"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at java.util.concurrent.FutureTask.run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("FutureTask.java:266"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at java.util.concurrent.ThreadPoolExecutor.runWorker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadPoolExecutor.java:1162"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at java.util.concurrent.ThreadPoolExecutor"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$Worker")]),t._v(".run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ThreadPoolExecutor.java:636"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        at java.lang.Thread.run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Thread.java:764"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-09-03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":52:57.952 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10010")]),t._v("-10045/com.github_rn I/ReactNativeJS\n")])])]),s("h4",{attrs:{id:"解决办法-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决办法-4"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),s("p",[t._v("在MainApplication.java中添加："),s("code",[t._v("CodePush.getJSBundleFile()")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MainApplication")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactApplication")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactNativeHost")]),t._v(" mReactNativeHost "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactNativeHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJSBundleFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CodePush")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getJSBundleFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("h3",{attrs:{id:"error-in-getting-binary-resources-modified-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error-in-getting-binary-resources-modified-time"}},[t._v("#")]),t._v(" Error in getting binary resources modified time")]),t._v(" "),s("h4",{attrs:{id:"问题描述-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题描述-5"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.60.5"')]),t._v(",\n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native-code-push"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^5.7.0"')]),t._v(",\n")])])]),s("p",[t._v("Codepush检测更新，logcat上述错误。")]),t._v(" "),s("h4",{attrs:{id:"解决办法-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决办法-5"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),s("p",[t._v("在android/app/build.gradle添加：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("apply from: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../../node_modules/react-native-code-push/android/codepush.gradle"')]),t._v("\n")])])]),s("p",[t._v("参考："),s("a",{attrs:{href:"https://github.com/Microsoft/react-native-code-push/issues/1046",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/Microsoft/react-native-code-push/issues/1046"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"unrecognized-font-family-ionicons-or-materialicons"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unrecognized-font-family-ionicons-or-materialicons"}},[t._v("#")]),t._v(" Unrecognized font family 'Ionicons' or 'MaterialIcons'")]),t._v(" "),s("h4",{attrs:{id:"问题描述-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题描述-6"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),s("p",[t._v("启动iOS APP报错，无法加载字体文件：")]),t._v(" "),s("blockquote",[s("p",[t._v("版本信息：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.60.5"')]),t._v(",\n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-native-vector-icons"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^6.6.0"')]),t._v(",\n")])])]),s("p",[t._v("无论是自动link还是手动link都包这个错误。")]),t._v(" "),s("h4",{attrs:{id:"解决办法-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决办法-6"}},[t._v("#")]),t._v(" 解决办法")]),t._v(" "),s("blockquote",[s("p",[t._v("第一步：")])]),t._v(" "),s("p",[t._v("切换到ios目录执行install：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ios\npod "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("第二步：")])]),t._v(" "),s("p",[t._v("将下面配置粘贴到info.plist：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<key>UIAppFonts</key>\n<array>\n  <string>AntDesign.ttf</string>\n  <string>Entypo.ttf</string>\n  <string>EvilIcons.ttf</string>\n  <string>Feather.ttf</string>\n  <string>FontAwesome.ttf</string>\n  <string>FontAwesome5_Brands.ttf</string>\n  <string>FontAwesome5_Regular.ttf</string>\n  <string>FontAwesome5_Solid.ttf</string>\n  <string>Foundation.ttf</string>\n  <string>Ionicons.ttf</string>\n  <string>MaterialIcons.ttf</string>\n  <string>MaterialCommunityIcons.ttf</string>\n  <string>SimpleLineIcons.ttf</string>\n  <string>Octicons.ttf</string>\n  <string>Zocial.ttf</string>\n</array>\n")])])]),s("p",[t._v("然后，重新运行项目，如果问题依旧，用Xcode打开"),s("code",[t._v("Github_RN.xcworkspace")]),t._v("，然后改为用Xcode运行项目。")]),t._v(" "),s("p",[t._v("参考："),s("a",{attrs:{href:"https://github.com/oblador/react-native-vector-icons#installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/oblador/react-native-vector-icons#option-manually"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);